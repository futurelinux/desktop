pkgname=kcm-systemd
_pkgname=systemd-kcm
pkgver=1.2.1
pkgrel=4
pkgdesc="Systemd control module for KDE"
arch=('x86_64')
url='https://cgit.kde.org/systemd-kcm.git/about/'
screenshot="http://wstaw.org/m/2013/11/19/screen27.png"
license=('GPL')
depends=('kconfigwidgets' 'kservice' 'boost-libs' 'kde-cli-tools')
makedepends=('extra-cmake-modules' 'python3' 'boost' 'git')
optdepends=('kde-cli-tools: to edit unit files')
_commit=c458c8b4b2f9d7c73d69ea4c5b61493a11856b3d
source=("git+https://anongit.kde.org/systemd-kcm.git#commit=$_commit") #v1.2.1^43
sha256sums=('SKIP')

prepare () {
  mkdir -p build
}
 
build() {
  cd build
  cmake ../$_pkgname-$pkgver \
   -DCMAKE_INSTALL_PREFIX=/usr \
   -DCMAKE_BUILD_TYPE=Release \
   -DCMAKE_INSTALL_LIBDIR=lib \
   -DKDE_INSTALL_USE_QT_SYS_PATHS=ON
  make
}

package() {
  cd build
  make DESTDIR="$pkgdir" install
}
 
