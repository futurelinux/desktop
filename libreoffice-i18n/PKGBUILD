pkgbase="libreoffice-i18n"

_rcver=6.2.2.2
pkgver=6.2.2
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86-64"
_url+="/${pkgver}/rpm/$arch"
#_url+="/rpm/x86-64"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dsb           "Lower Sorbian"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'fy            "Frisian"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'gug           "Guarani"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hsb           "Sorbian (Upper)"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kab           "Kabyle"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vec           "Venetian"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86-64_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86-64_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86-64_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86-64_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86-64_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86-64_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('cb3452f2b586d8db64ae196513405db8'
         'ad4bc3c30221eff13fc740d1415c92c2'
         '6cd518e71a6bf1d7de097f09e7073f8f'
         'd1d31445eda984d0c36ed09735848d08'
         '25f28115c9872fc0ddc17776e5d7cda5'
         '3e1be13298b51a9b07e20b68fec552d0'
         'b410b3bf242a8b8969de8325edb4f00b'
         '8ce9ad644f3d372dd2657ea66b6a0317'
         'c23b3543a642d5d1eb21893a3c3c3942'
         'c9654acae882d1885a6dbafa0a866fb5'
         '890df239e540a4c740821bc96fe2a6ca'
         '948579f873f4ff3d7683ddc9db0f87b1'
         '9a8d391e2cbd6dd191b9d68188c433d3'
         'b63608921ec59900944ed91dcd6bc13c'
         '081e87fe1f2929ccb3c0fdd37987378e'
         '3ccb3debb38c6edfcc89de538d56f8cd'
         'd182d9c26421919e732b93f106a76777'
         'f06e82189840c90559a83eed5baa9fde'
         '1c97cda632c00c700ae9e326b8fd1db5'
         '140a74f6b767d0fdda0b739033302bdb'
         '9d834fe759bf8cb254d8f9968b8f1d8e'
         '15429cddcbc17e3341f8ae2e51459ea8'
         '6d619eeda8d549d92aa27f20c171b18d'
         '9633e98ff3da79a7039ba695175d2761'
         '976713c2c3d424cac2eaa94040ed4c3a'
         'c6ba7d6c0ab6cabec9f265b803a018b5'
         '6168c7306c93dfdcec2d0a3a346b6c2e'
         'ad0f3f145babba328b7a49675d3b7770'
         '80a89a5cfb9a275f15f6b2083931dbdd'
         'c05e32706c331ad59c1c4c21ad6d1dc6'
         '5adf8f0c8e6dcf056094968963b6fbac'
         'b6d6e8c9f99300db2484c1d097eb1cac'
         '56d7ce8788d4ddb11f40b31be6758166'
         '078247603a8e852cca6c6d6070a499d3'
         '1be06f78589ffb42a6bbeb0ef1045ecc'
         '9e335a5491022216d9dfa60aa42a13e7'
         '48accd8e9fc4571e2a145c530efabc6a'
         '5e03bcf4c059ece52bff131159e44cf6'
         '33340bb793f3e6e87eef5b035c370983'
         'f5db596ade4074bfd221b3a119a457f2'
         '6f1648f5e5c2cdee85047bd7737a5411'
         '80d1f95e7d9ec87128354521c7b8c674'
         'ce3db641ed4e010577d8ef5c22d06955'
         'df3d2efef9f5f8e3358418a3ef7e31c7'
         'a9bf98d18e90bdf1e017bdfa6421948e'
         'a90bcbc19c30e87b33c2ae32b52208bb'
         'dafe55e87df1aac246ea22f2f687b8a7'
         '2ea4cc58b075c0f6749ac06e69332c96'
         '2377cac618fd70a7e0964ea7fb453b78'
         '877a516c92371e822c9f62c306eb95c1'
         '1af9af4981d6b2ef523b8573fa0c91f7'
         '5acfc33b3935c8c9b0f02a40352793a3'
         'ec088650f5531aa743c602e73d23dd5b'
         '09dc18fe3a286142c54cd6f0ff2abf62'
         '956b10113881709381311a40f2a25f5d'
         '80e32808638b3a4e0ff392291545c4ca'
         'bd6e5f1aaf8f7201fdff24d9045f8690'
         '394e1d0a616b497630cca2b3fabdb034'
         '630124c8977a56057f4890a1d376b7c6'
         'e6260dbd7c398f992094b5f1e88aa953'
         'c592eaa3f97a7e913fa564861cbf10e5'
         '47de5ad2b27b2ecba35055f1a0448108'
         'a16397f36bc200f111a08cad7a0ea83c'
         '87b9fcbc77cae99f131eb8e18efa8083'
         '3397dcbeeaea1836eb7bbb3e7b8c8574'
         '5805cacdafcbfdd6e73140d8f00c3d68'
         'bdc7c4d241f045164f775fd55a26a120'
         '788de3ae4043dbc25b361e511c1478b7'
         'a71bea6765c5888b25ca77e6861f8ad5'
         'b9d9f4ecbb3901db917e61040270784d'
         'd6fbea92f5016dd5c2d15af0d3b4344b'
         '0e6f50aeff15bb297c0d6328e2630c96'
         'ef50993f6e1ba2822cad8ef4df308aa9'
         '14e0983c0a23c755b1ad0627fa1dd1d6'
         '6803d7f3f537a5934ab7103d7fc2aaec'
         '9450cfbb218647b3aeba26d9f025b3c5'
         '8ed431c3499cf626b4cf76dae7f3043d'
         'dba6a92445bbee0271790427c29a8af4'
         'ec3584d537fe28fc6bf57ae611ccc2c8'
         '8f9959caed57a23e9b193c599c691b30'
         '3ca23a5b19d1fa4ec3ce743bf902fd36'
         '7df79de71909fdd914dd71dba123ecf0'
         '234f07a2ae6f84669399c0551c4e4986'
         'f8c0f2dd77362a468feacf193076b2ba'
         'a4dd4942272c5e6c459b5fad4e933b54'
         '576a80593dc46ba4a4f4140bbc899398'
         'c285b94311b0fab361448dd07cffef60'
         '4f2132aa4d37d0017e4c53e16c303234'
         'ac659f873b636b1ad5116dd8b92b3474'
         'a8ff25238f3a6401f3a828b4e66811c8'
         'e67be491d35cf2150b19de039d1ef9f5'
         'd4f29e2b241cba3e4d3f547aa7d797a3'
         '1e0e1b8ab811818288a27f447d8cc8b4'
         'f1c8ada1558bad1ff955fc0b2d07aea7'
         '89ef635e903aae6effacca543a0a8bf1'
         '1c4f16a68a1e608771e8aec412d715e5'
         '5b15472dbd35b5145e5ffa754f69bb7d'
         '3c6b665889a088d30391cd706e2fbff6'
         'cd7e2faa867d04f98de9043ccb6be847'
         '48836d8cc8439a59601219ddd61a0738'
         'c9464d06dd55e41faf6e2e5d81516358'
         '79c6e48519ee12861c89e37804a47071'
         '5b2422c43c8e472952ed292fd2e752ee'
         '58da0709a094a6a27046355c5fd041a5'
         '787e8679cb737dd784857f2c54a72538'
         'ae02fcbdad6517bf33f0be29dc727786'
         '975f075f8fb1f75050a91ac9737ad7aa'
         '42d951bb50b514c1098ff328c202f12b'
         '0515cc061e26471c7cd8aba214c9f4bc'
         '7844bbb4f7acc161b28e7cde672d09f3'
         '3abe962daa8ab1a80262d8e9b6a1d689'
         '19cd91d6e58611885516519e44f667ed'
         '2a12930514d681cb3a4bab5c35027f7b'
         'e3ddbc898494adb4602ad87f54c6c9e7'
         '8c8392dc7b8032ae873beb1deac66ca7'
         'e851606c6f3da18cbdd458137ab79758'
         '1d28acc07a4b30d6e354c5503e9a696f'
         '5ea018b751c6bfc7d9b35667cfc11e31'
         '0252e64baf876db86dbd3efb5f49b1cf'
         '572d548b9ead25371bdf966e173807f4'
         'ac0bcb044bc0d89afc0d4bc1c21bb3fc'
         'abac074fa1a3b907b949ad9702b13bb0'
         '9f8eb2c2c213e5af15211b653a7b0eb0'
         '1deb9abbd7e4ac786d3a11a3b7b16303'
         '832858bc139142778daee80f155250ee'
         '7299eac3b34d92fbbe2448cbe06f38b4'
         'e975043310f221602b983b2698c02a4a'
         'b7d3305f9072646fe0e737c1dfcc5fa8'
         'a662328092a47ea31129019640475dc8'
         'f08794e1f3c5c71575c7897645b464c5'
         '5dc94a8f546106840f99bb937652d9de'
         '7233b275fd8ed6529a311945abce15e6'
         'b927d1cd91954bd5b3579e72dbba1f87'
         'a2cc0412d92af514787b3d64879b5280'
         '1b817ff0f95579312ca7b74cb59825fb'
         'd0790c2fd7b0898c0a3a33852ee5bb07'
         '4fcbfacd6136bfd1ac0165d90547bbc1'
         '564509536dedd00e465ebfe5d0259ce7'
         'efd37a8dd832861e0d75b4d70bef30a9'
         '648a2c4632b5c439c12d90912339fcaa'
         'db9f012f8c6ea1f2442724caff73e2ad'
         'b9ece84ceeae6a18718271f36fd5f8d5'
         '34947c0f85cab00a0eb20e6708985df4'
         'c5978af0c11640e954071ab0cdb4e0aa'
         '6ed55a70d2c6805a429aa911787d6772'
         '9972c0b7034e09a3544414e5b5044a4f'
         '0d3272c358b0036afd35a74e00a1407e'
         'ee2f97f35b80682d4b0d5225292e98fa'
         '07978f4d4aeecd2e68f40f7a14e15047'
         '1e5ac3e903b9f401933e5222be336aea'
         'a9433aa60b6f82ab61c1729ac24f211f'
         '50b49ae81b89116aa7bd965a166e9e48'
         '5ee0698ad2fd7033a79b3cc7326a0030'
         '18da70f47f01cc3dd21f340442a6ad31'
         'f39485ff16eeec38f9d7df37ae53d670'
         '0eb42bcbe7b0d17d67af2541aef02c54'
         'bca2a2811dc5765b4893b6dd0edea808'
         '593d47361564c5174f9f31dc6af40202'
         '2193bff4066e6048cb8ee04f741c71f8'
         '822659f08dd28ffb3093c862fe53e037'
         '8dbae571f7c415f8dc7076aa85151cce'
         'f743f068b6bdfc6b64a7683d46f50a43'
         'd2cf6ac5c278234494930e01601ff721'
         '59937966a425d39b8d59acf9c98d7e46'
         '05565145500fa906447a9cc08f299e15'
         '6b6bbb3b96c209ecfa9431ba1ab2ca9c'
         'fa7c28cdd74fb3c8105cfddba5b524cb'
         '8dfc6d627e6fc4a19748c059878da945'
         '3a41bfb5c2304473733b117141acc936'
         '0ca8898b61c41451e6d6a3f91832d353'
         '87e3c185cadf13817a531858baf9dccd'
         'e907732b33336dde141ca78a34b5b032'
         '2d2078537603147269f458969df21eea'
         '7027155ed8258f568f908b6fee276380'
         '168546fd9a49b8ae3e5549142621d6de'
         'cc720b1d0d4a2f1f767de9113da5f947'
         '2b1978c167743b238ce33909ccf9e5d3'
         '45e20ddacbf71ba691800e10ce01fb6d'
         '58513b3b74493676b5a0ae26d73ea2b7')
