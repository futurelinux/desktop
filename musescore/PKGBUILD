pkgname=musescore
_pkgname=MuseScore
pkgver=3.2.3
pkgrel=1
pkgdesc="A music score editor written in Qt"
arch=('x86_64')
url="https://musescore.org/en/"
license=('GPL')
depends=('alsa-lib' 'libpulse' 'libsndfile' 'libvorbis' 'portaudio' 'portmidi' 'qt5-base'
         'qt5-declarative' 'qt5-svg' 'qt5-tools' 'qt5-webengine' 'qt5-xmlpatterns' 'zlib')
makedepends=('cmake' 'doxygen' 'lame' 'qt5-script' 'texlive-core')
optdepends=('lame: MP3 export')
categories=('multimedia')
source=("$pkgname-$pkgver.tar.gz::https://github.com/$pkgname/$_pkgname/archive/v$pkgver.tar.gz")
sha256sums=('d6e58c942efd4e9b6567705c81b77287acfe0baa99033b3fb96605698bb9b5af')

prepare() {
 cd $_pkgname-$pkgver
 sed 's,QT_QMAKE_EXECUTABLE qmake,QT_QMAKE_EXECUTABLE qmake-qt5,g' -i build/FindQt5.cmake
}

build() {
  cd $_pkgname-$pkgver
  make PREFIX='/usr' NO_RPATH=TRUE USE_SYSTEM_FREETYPE="ON" UPDATE_CACHE="OFF" release
}

package() {
  cd $_pkgname-$pkgver
  make DESTDIR=$pkgdir -C build.release install
}
